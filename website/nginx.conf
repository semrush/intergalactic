events {}

http {
    include mime.types;
    sendfile on;

    server {
        listen 8080;
        listen [::]:8080;

        resolver 127.0.0.11;
        autoindex off;

        server_name _;
        server_tokens off;

        root /app/static;

        location /api/ {
          proxy_pass  http://localhost:3001/;
        }
        location /intergalactic/api/ {
          proxy_pass  http://localhost:3001/;
        }
        location /intergalactic/assets {
          alias /app/static/intergalactic/assets;
        }
        location / {
          rewrite /intergalactic/(.*) /$1  break;
        }

        error_page 404 /index.html;
    }
    
}